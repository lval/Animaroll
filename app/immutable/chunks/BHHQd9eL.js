const f="en",p=["en","es","ja","zh-CN"],m=["url","preferredLanguage","baseLocale"];globalThis.__paraglide={};let h=!1,u=()=>{let e;for(const t of m){if(t==="baseLocale")e=f;else if(t==="url"&&typeof window<"u")e=b(window.location.href);else if(t==="preferredLanguage")e=j();else if(U(t)&&i.has(t)){const n=i.get(t);if(n){const a=n.getLocale();if(a instanceof Promise)continue;e=a}}if(e!==void 0){const n=z(e);return h||(h=!0,v(n,{reload:!1})),n}}throw new Error("No locale found. Read the docs https://inlang.com/m/gerre34r/library-inlang-paraglideJs/errors#no-locale-found")},v=(e,t)=>{const n={reload:!0,...t};let a;try{a=u()}catch{}let r;for(const o of m)if(o!=="baseLocale"){if(o==="url"&&typeof window<"u")r=s(window.location.href,{locale:e}).href;else if(U(o)&&i.has(o)){const c=i.get(o);if(c){const g=c.setLocale(e);g instanceof Promise&&g.catch(y=>{console.warn(`Custom strategy "${o}" setLocale failed:`,y)})}}}n.reload&&window.location&&e!==a&&(r?window.location.href=r:window.location.reload())},d=()=>typeof window<"u"?window.location.origin:"http://fallback.com";function l(e){return e?p.includes(e):!1}function z(e){if(l(e)===!1)throw new Error(`Invalid locale: ${e}. Expected one of: ${p.join(", ")}`);return e}function j(){if(!navigator?.languages?.length)return;const e=navigator.languages.map(t=>({fullTag:t.toLowerCase(),baseTag:t.split("-")[0]?.toLowerCase()}));for(const t of e){if(l(t.fullTag))return t.fullTag;if(l(t.baseTag))return t.baseTag}}let w,L;function b(e){const t=typeof e=="string"?e:e.href;if(w===t)return L;let n;return n=C(e),w=t,L=n,n}function C(e){const n=new URL(e,"http://dummy.com").pathname.split("/").filter(Boolean);if(n.length>0){const a=n[0];if(l(a))return a}return f}function s(e,t){return S(e,t)}function S(e,t){const n=typeof e=="string"?new URL(e,d()):new URL(e),a=t?.locale??u();if(b(n)===a)return n;const o=n.pathname.split("/").filter(Boolean);return o.length>0&&l(o[0])&&o.shift(),a===f?n.pathname="/"+o.join("/"):n.pathname="/"+a+"/"+o.join("/"),n}function O(e){return R(e)}function R(e){const t=typeof e=="string"?new URL(e,d()):new URL(e),n=t.pathname.split("/").filter(Boolean);return n.length>0&&l(n[0])&&(t.pathname="/"+n.slice(1).join("/")),t}function P(e,t){const n=u(),a=t?.locale??n,r=new URL(e,d()),o=s(r,{locale:a});return e.startsWith("/")&&r.origin===o.origin?a!==n&&s(r,{locale:n}).origin!==o.origin?o.href:o.pathname+o.search+o.hash:o.href}const i=new Map;function U(e){return typeof e=="string"&&/^custom-[A-Za-z0-9_-]+$/.test(e)}const T="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(T);export{p as a,f as b,O as d,u as g,P as l,v as s};
